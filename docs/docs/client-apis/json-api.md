---
title: JSON API
sidebar_position: 1
---

[//]: # (Copyright Jiaqi Liu)

[//]: # (Licensed under the Apache License, Version 2.0 &#40;the "License"&#41;;)
[//]: # (you may not use this file except in compliance with the License.)
[//]: # (You may obtain a copy of the License at)

[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)

[//]: # (Unless required by applicable law or agreed to in writing, software)
[//]: # (distributed under the License is distributed on an "AS IS" BASIS,)
[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)
[//]: # (See the License for the specific language governing permissions and)
[//]: # (limitations under the License.)

[JSON-API](https://jsonapi.org) is a specification for building REST APIs for CRUID (create, read, update, and delete)
operations.

Similar to GraphQL, it allows the client to control what is returned in the response payload. Unlike GraphQL, the
JSON-API spells out hot to perform file operations instead of file metadata operations.

JSON-API has no standardized schema introspection. However, Athena adds this capability to file service by exporting an
[Open API Initiative](https://www.openapis.org) document (formerly known as [Swagger](https://swagger.io)). The
[json-api specification](https://jsonapi.org/format/) is the best reference for understanding JSON-API.
The following sections describe commonly used JSON-API features as well as Athena additions for filtering and swagger.

Hierarchical URLs
-----------------

Athena generally follows the [JSON-API recommendations](http://jsonapi.org/recommendations/) for URL design.

Athena currently requires all files to be addressed by ID within a URL parameter. For example, downloading a file with
an ID of 1 must be fully qualified by ID: `/file/download?fileId=1`

File Identifiers
----------------

Athena supports two mechanisms by which a newly uploaded file is assigned an ID:

1. The file is assigned by a [fixed-length ID][FileNameAndUploadedTimeBasedIdGenerator] and saved in the data store.
2. The application provides an ID which is generated by a custom [FileIdGenerator] implementation  by the application

:::note

In order to replace the [default file ID generator][FileNameAndUploadedTimeBasedIdGenerator], the custom implementation
must be bound explicitly through [BinderFactory][AbstractBinderFactory]. For example, when application implements a
generator called 'MyIdGenerator', it will load via

```java
@Override
protected Class<? extends FileIdGenerator> buildFileIdGenerator() {
    return MyIdGenerator.class
}
```

For more info on custom binding, please check out
[Basic Dependency Injection using Jersey's HK2](../contributing/jersey-di-using-hk2)

:::

[FileNameAndUploadedTimeBasedIdGenerator]: https://github.com/QubitPi/athena/blob/master/athena-core/src/main/java/io/github/qubitpi/athena/file/identifier/FileNameAndUploadedTimeBasedIdGenerator.java
[FileIdGenerator]: https://github.com/QubitPi/athena/blob/master/athena-core/src/main/java/io/github/qubitpi/athena/file/identifier/FileIdGenerator.java
[AbstractBinderFactory]: https://github.com/QubitPi/athena/blob/master/athena-core/src/main/java/io/github/qubitpi/athena/application/AbstractBinderFactory.java
